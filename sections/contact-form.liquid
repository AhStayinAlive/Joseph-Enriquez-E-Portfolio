{{ 'section-contact-form.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  /* ---------------- Broen header look + spacing ---------------- */
  .contact{
    --glass-blur: 20px;
    --glass-saturate: 180%;
  }
  .contact .title.title-wrapper--no-top-margin.inline-richtext{
    text-align:center; font-weight:700; letter-spacing:-.02em; line-height:1.08;
    padding:22px 0 26px;  /* extra breathing room like screenshot */
    margin-bottom:22px; position:relative;
    text-shadow:0 6px 24px rgba(0,0,0,.35);
  }
  .contact .title.title-wrapper--no-top-margin.inline-richtext::after{
    content:''; position:absolute; left:50%; transform:translateX(-50%); bottom:-8px;
    width:92px; height:2px; border-radius:9999px;
    background:linear-gradient(90deg,transparent,rgba(255,255,255,.85) 50%,transparent);
    filter:drop-shadow(0 0 6px rgba(255,255,255,.35));
  }
  .contact .field__label,
  .contact .form__label,
  .contact .field__input,
  .contact .text-area{ font-family:inherit; letter-spacing:-.01em; }

  /* ---------------- Dark liquid glass button (same as collection filter/ATC) ----------------
     Copied/adapted from your collection template’s .broen-btn / .broen-btn-primary styles,
     with higher specificity and no `.button` class so the theme color scheme can’t override.
  */
  .contact__button .broen-btn{
    display:inline-flex; align-items:center; justify-content:center; gap:.5ch;
    min-height:44px; padding:12px 20px; border-radius:24px; cursor:pointer; user-select:none;
    text-decoration:none; text-align:center;
    font:600 14px/1 -apple-system,BlinkMacSystemFont,"SF Pro Text","SF Pro Display",system-ui,sans-serif;
    letter-spacing:-.01em; border:1px solid rgba(255,255,255,.18);
    transition:transform .2s, box-shadow .2s, background .2s, filter .2s;
  }
  .contact__button .broen-btn--dark-glass{
    color:#ffffff !important;
    text-shadow:0 1px 2px rgba(0,0,0,.8);
    border:none !important;
    backdrop-filter:saturate(var(--glass-saturate)) blur(var(--glass-blur));
    -webkit-backdrop-filter:saturate(var(--glass-saturate)) blur(var(--glass-blur));
    background:
      linear-gradient(135deg, rgba(60,60,60,.7) 0%, rgba(40,40,40,.85) 50%, rgba(30,30,30,.9) 100%),
      rgba(35,35,35,.8) !important;
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,.08),
      inset 0 -1px 0 rgba(0,0,0,.3),
      0 4px 12px rgba(0,0,0,.4),
      0 8px 24px rgba(0,0,0,.2) !important;
  }
  .contact__button .broen-btn--dark-glass:hover{
    transform:translateY(-1px);
    background:
      linear-gradient(135deg, rgba(70,70,70,.75) 0%, rgba(50,50,50,.9) 50%, rgba(35,35,35,.95) 100%),
      rgba(40,40,40,.85) !important;
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,.12),
      inset 0 -1px 0 rgba(0,0,0,.25),
      0 6px 16px rgba(0,0,0,.5),
      0 12px 30px rgba(0,0,0,.3) !important;
  }
  .contact__button .broen-btn--dark-glass:active{
    transform:translateY(0);
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,.06),
      inset 0 -1px 0 rgba(0,0,0,.4),
      0 2px 6px rgba(0,0,0,.5),
      0 4px 15px rgba(0,0,0,.3) !important;
  }
  .contact__button .broen-btn--dark-glass:focus-visible{
    outline:none;
    box-shadow:
      0 0 0 3px rgba(255,255,255,.12),
      0 0 0 6px rgba(0,110,255,.40) !important;
  }
  @supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)){
    .contact__button .broen-btn--dark-glass{
      background: rgba(58,58,60,.86) !important;
      box-shadow: 0 8px 20px rgba(0,0,0,.25) !important;
    }
  }
{%- endstyle -%}

<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="contact page-width page-width--narrow section-{{ section.id }}-padding">
    {%- if section.settings.heading != blank -%}
      <h2 class="title title-wrapper--no-top-margin inline-richtext {{ section.settings.heading_size }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
        {{ section.settings.heading }}
      </h2>
    {%- else -%}
      <h2 class="visually-hidden">{{ 'templates.contact.form.title' | t }}</h2>
    {%- endif -%}

    {%- liquid
      assign contact_form_class = 'isolate'
      if settings.animations_reveal_on_scroll
        assign contact_form_class = 'isolate scroll-trigger animate--slide-in'
      endif
    -%}
    {%- form 'contact', id: 'ContactForm', class: contact_form_class -%}
      {%- if form.posted_successfully? -%}
        <h2 class="form-status form-status-list form__message" tabindex="-1" autofocus>
          {% render 'icon-success' %} {{ 'templates.contact.form.post_success' | t }}
        </h2>
      {%- elsif form.errors -%}
        <div class="form__message">
          <h2 class="form-status caption-large text-body" role="alert" tabindex="-1" autofocus>
            {% render 'icon-error' %} {{ 'templates.contact.form.error_heading' | t }}
          </h2>
        </div>
        <ul class="form-status-list caption-large" role="list">
          <li>
            <a href="#ContactForm-email" class="link">
              {{ form.errors.translated_fields.email | capitalize }} {{ form.errors.messages.email }}
            </a>
          </li>
        </ul>
      {%- endif -%}

      <div class="contact__fields">
        <div class="field">
          <input class="field__input" autocomplete="name" type="text" id="ContactForm-name"
                 name="contact[{{ 'templates.contact.form.name' | t }}]"
                 value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
                 placeholder="{{ 'templates.contact.form.name' | t }}">
          <label class="field__label" for="ContactForm-name">{{ 'templates.contact.form.name' | t }}</label>
        </div>
        <div class="field field--with-error">
          <input autocomplete="email" type="email" id="ContactForm-email" class="field__input" name="contact[email]"
                 spellcheck="false" autocapitalize="off"
                 value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
                 aria-required="true"
                 {% if form.errors contains 'email' %} aria-invalid="true" aria-describedby="ContactForm-email-error" {% endif %}
                 placeholder="{{ 'templates.contact.form.email' | t }}">
          <label class="field__label" for="ContactForm-email">
            {{- 'templates.contact.form.email' | t }} <span aria-hidden="true">*</span>
          </label>
          {%- if form.errors contains 'email' -%}
            <small class="contact__field-error" id="ContactForm-email-error">
              <span class="visually-hidden">{{ 'accessibility.error' | t }}</span>
              <span class="form__message">{%- render 'icon-error' -%}
                {{- form.errors.translated_fields.email | capitalize }} {{ form.errors.messages.email -}}
              </span>
            </small>
          {%- endif -%}
        </div>
      </div>

      <div class="field">
        <input type="tel" id="ContactForm-phone" class="field__input" autocomplete="tel"
               name="contact[{{ 'templates.contact.form.phone' | t }}]" pattern="[0-9\-]*"
               value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}"
               placeholder="{{ 'templates.contact.form.phone' | t }}">
        <label class="field__label" for="ContactForm-phone">{{ 'templates.contact.form.phone' | t }}</label>
      </div>

      <div class="field">
        <textarea rows="10" id="ContactForm-body" class="text-area field__input"
                  name="contact[{{ 'templates.contact.form.comment' | t }}]"
                  placeholder="{{ 'templates.contact.form.comment' | t }}">{{- form.body -}}</textarea>
        <label class="form__label field__label" for="ContactForm-body">
          {{- 'templates.contact.form.comment' | t -}}
        </label>
      </div>

      <div class="contact__button">
        <!-- Uses the same dark glass style as your collection filter/ATC -->
        <button type="submit" class="broen-btn broen-btn--dark-glass">
          {{ 'templates.contact.form.send' | t }}
        </button>
      </div>
    {%- endform -%}
  </div>
</div>

{% schema %}
{
  "name": "t:sections.contact-form.name",
  "tag": "section",
  "class": "section",
  "disabled_on": { "groups": ["header", "footer"] },
  "settings": [
    { "type": "inline_richtext", "id": "heading", "default": "Contact Broen", "label": "Heading" },
    {
      "type": "select", "id": "heading_size",
      "options": [
        { "value": "h2", "label": "t:sections.all.heading_size.options__1.label" },
        { "value": "h1", "label": "t:sections.all.heading_size.options__2.label" },
        { "value": "h0", "label": "t:sections.all.heading_size.options__3.label" }
      ],
      "default": "h1", "label": "t:sections.all.heading_size.label"
    },
    { "type": "color_scheme", "id": "color_scheme", "label": "t:sections.all.colors.label", "default": "scheme-1" },
    { "type": "header", "content": "t:sections.all.padding.section_padding_heading" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "t:sections.all.padding.padding_top", "default": 36 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "t:sections.all.padding.padding_bottom", "default": 36 }
  ],
  "presets": [{ "name": "t:sections.contact-form.presets.name" }]
}
{% endschema %}
